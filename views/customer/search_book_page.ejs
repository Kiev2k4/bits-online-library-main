<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>TIMR - Search results</title>
		<link rel="icon" type="image/x-icon" href="/public/assets/icon1.svg" />

		<link
			rel="stylesheet"
			href="https://fonts.googleapis.com/css2?family=Public Sans:wght@400;500;600;700&display=swap"
		/>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
			crossorigin="anonymous"
		/>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
			crossorigin="anonymous"
		></script>
		<script src="https://kit.fontawesome.com/090ced38b4.js" crossorigin="anonymous"></script>

		<link rel="stylesheet" href="/public/css/global.css" />
		<link rel="stylesheet" href="/public/css/customerBookSearch.css" />
	</head>
	<body>
		<%- include('./components/header.ejs', { user }) %>

		<div class="div flex-grow-1">
			<div class="div-21">
				<div class="container-xxl d-flex gap-2 align-items-center">
					<a href="/" class="text-decoration-none d-flex gap-2 align-items-center">
						<i class="fa-solid fa-house" style="color: rgba(95, 108, 114, 1)"></i>
						<div class="div-23">Home</div>
					</a>
					<i class="fa-solid fa-chevron-right" style="color: rgba(95, 108, 114, 1)"></i>
					<div class="div-24">
						<span style="color: rgba(95, 108, 114, 1)">Search result for</span>
						<span id="searching-query" style="color: rgba(45, 165, 243, 1)"></span>
					</div>
				</div>
			</div>
			<div class="div-25">
				<div class="div-26">
					<div class="column">
						<div class="div-27">
							<div class="div-28">REFINE MY RESULTS</div>
							<div class="accordion container-fluid">
								<div class="accordion-item border-0">
									<h2 class="accordion-header">
										<button
											class="accordion-button fw-bold"
											type="button"
											data-bs-toggle="collapse"
											data-bs-target="#collapseOne"
											aria-expanded="true"
											aria-controls="collapseOne"
										>
											Subjects
										</button>
									</h2>
									<div id="collapseOne" class="accordion-collapse collapse show">
										<div class="accordion-body p-3">
											<% genres.forEach(function(genre) { %>
											<div class="form-check py-2">
												<input
													id="filter-subject-<%= genre.id %>"
													class="form-check-input filter-subject"
													type="checkbox"
													value="<%= genre.id %>"
												/>
												<label class="form-check-label" for="filter-subject-<%= genre.id %>">
													<%= genre.name %>
												</label>
											</div>
											<% }) %>
										</div>
									</div>
								</div>
								<div class="accordion-item border-0">
									<h2 class="accordion-header">
										<button
											class="accordion-button collapsed fw-bold"
											type="button"
											data-bs-toggle="collapse"
											data-bs-target="#collapseTwo"
											aria-expanded="true"
											aria-controls="collapseTwo"
										>
											Publisher
										</button>
									</h2>
									<div id="collapseTwo" class="accordion-collapse collapse">
										<div class="accordion-body">
											<% publishers.forEach(function (publisher){ %>
											<div class="form-check py-2">
												<input
													class="form-check-input filter-publisher"
													type="checkbox"
													value="<%= publisher.id %>"
													id="filter-publisher-<%= publisher.id %>"
												/>
												<label class="form-check-label" for="filter-publisher-<%= publisher.id %>">
													<%= publisher.name %>
												</label>
											</div>
											<% }) %>
										</div>
									</div>
								</div>
								<div class="accordion-item border-0">
									<h2 class="accordion-header">
										<button
											class="accordion-button collapsed fw-bold"
											type="button"
											data-bs-toggle="collapse"
											data-bs-target="#collapseThree"
											aria-expanded="true"
											aria-controls="collapseThree"
										>
											Available Date
										</button>
									</h2>
									<div id="collapseThree" class="accordion-collapse collapse">
										<div class="accordion-body">
											<div class="form-floating mb-3">
												<input
													type="date"
													class="form-control"
													id="floatingFromDate"
													placeholder="From Date"
												/>
												<label for="floatingFromDate">From date</label>
											</div>
											<div class="form-floating">
												<input
													type="date"
													class="form-control"
													id="floatingToDate"
													placeholder="To Date"
												/>
												<label for="floatingToDate">To date</label>
											</div>
										</div>
									</div>
								</div>
								<div class="accordion-item border-0">
									<h2 class="accordion-header">
										<button
											class="accordion-button fw-bold"
											type="button"
											data-bs-toggle="collapse"
											data-bs-target="#collapseFour"
											aria-expanded="true"
											aria-controls="collapseFour"
										>
											Resource Type
										</button>
									</h2>
									<div id="collapseFour" class="accordion-collapse collapse show">
										<div class="accordion-body d-flex flex-wrap gap-2">
											<% resourceTypes.forEach(function (resourceType){ %>
											<input
												id="filter-resourceType<%= resourceType.id %>"
												class="btn-check mb-2 filter-resourceType"
												type="checkbox"
												value="<%= resourceType.id %>"
											/>
											<label
												class="btn btn-outline-primary resourceType"
												for="filter-resourceType<%= resourceType.id %>"
											>
												<%= resourceType.name %>
											</label>
											<% }) %>
										</div>
									</div>
								</div>
							</div>
							<div class="container-fluid">
								<div class="row justify-content-between">
									<button id="clear-filter" type="button" class="col-5 btn btn-light">CLEAR</button>
									<button id="apply-filter" type="button" class="col-6 btn">APPLY FILTERS</button>
								</div>
							</div>
						</div>
					</div>
					<div class="column-2">
						<div class="div-119">
							<div class="div-120">
								<form id="search-form" class="input-group">
									<input
										id="search-input"
										type="text"
										class="form-control"
										placeholder="Search for book names, ISBN, author..."
										aria-label="Search"
										aria-describedby="basic-addon1"
									/>
									<button class="input-group-text" id="basic-addon1">
										<i class="fa-solid fa-magnifying-glass"></i>
									</button>
								</form>
								<div class="div-123">
									<div class="div-124">Sort by:</div>
									<select id="sort-select" class="form-select" aria-label="Sort result">
										<option value="0" selected>Alphabet</option>
										<option value="1">Latest</option>
										<option value="2">Oldest</option>
									</select>
								</div>
							</div>
							<div class="div-127">
								<div class="div-136">
									<span class="fw-bold"><%= totalItems %> </span>
									<span class="text-secondary"> Result(s) found</span>
								</div>
							</div>
							<% books.forEach(function(book) { %>
							<div class="div-137">
								<div class="div-138">
									<a href="/books/<%= book.id %>">
										<img
											loading="lazy"
											srcset="
												https://cdn.builder.io/api/v1/image/assets/TEMP/1d969d21-9530-4a67-a320-5e174a6f5a2b?apiKey=930e2bc759df4761971987697f1cb851&width=100   100w,
												https://cdn.builder.io/api/v1/image/assets/TEMP/1d969d21-9530-4a67-a320-5e174a6f5a2b?apiKey=930e2bc759df4761971987697f1cb851&width=200   200w,
												https://cdn.builder.io/api/v1/image/assets/TEMP/1d969d21-9530-4a67-a320-5e174a6f5a2b?apiKey=930e2bc759df4761971987697f1cb851&width=400   400w,
												https://cdn.builder.io/api/v1/image/assets/TEMP/1d969d21-9530-4a67-a320-5e174a6f5a2b?apiKey=930e2bc759df4761971987697f1cb851&width=800   800w,
												https://cdn.builder.io/api/v1/image/assets/TEMP/1d969d21-9530-4a67-a320-5e174a6f5a2b?apiKey=930e2bc759df4761971987697f1cb851&width=1200 1200w,
												https://cdn.builder.io/api/v1/image/assets/TEMP/1d969d21-9530-4a67-a320-5e174a6f5a2b?apiKey=930e2bc759df4761971987697f1cb851&width=1600 1600w,
												https://cdn.builder.io/api/v1/image/assets/TEMP/1d969d21-9530-4a67-a320-5e174a6f5a2b?apiKey=930e2bc759df4761971987697f1cb851&width=2000 2000w,
												https://cdn.builder.io/api/v1/image/assets/TEMP/1d969d21-9530-4a67-a320-5e174a6f5a2b?apiKey=930e2bc759df4761971987697f1cb851&
											"
											class="img-15"
										/>
									</a>

									<a href="/books/<%= book.id %>" class="div-139 text-decoration-none">
										<div class="div-140"><%= book.type %></div>
										<div class="div-141"><%= book.title %></div>
										<div class="div-142"><%= book.authors %></div>
										<div class="div-143">
											<%= (new Date(book.publishedDate)).getFullYear() %>, <%= book.publisher %>
										</div>
										<div class="div-144">“<%= book.description %>”</div>
									</a>
									<% if (user) { %>
									<button
										type="button"
										class="favorite-button <%- book.bookmarkId ? 'favorite' : '' %>"
										data-book-id="<%= book.id %>"
										data-bookmark-id="<%= book.bookmarkId %>"
									>
										<i class="fa-solid fa-heart fa-lg" style="color: #ff4dde"></i>
										<i class="fa-regular fa-heart fa-lg"></i>
									</button>
									<% } %>
								</div>
							</div>
							<% }) %> <%- include('./components/pagination.ejs', { totalItems, totalPages,
							currentPage }) %>
						</div>
					</div>
				</div>
			</div>
		</div>
		<%- include('./components/footer.ejs') %>
		<script src="/public/js/bookSearch.js"></script>
	</body>
</html>
